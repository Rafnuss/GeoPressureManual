<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 7 GeoPressureViz | A User Manual for GeoPressureR</title>
<meta name="author" content="Raphaël Nussbaumer">
<meta name="description" content="GeoPressureR includes the shiny app GeoPressureViz which helps you visualize the overall trajectory of the bird as well as each step-by-step move. Note that this is a visualization tool only and...">
<meta name="generator" content="bookdown 0.35 with bs4_book()">
<meta property="og:title" content="Chapter 7 GeoPressureViz | A User Manual for GeoPressureR">
<meta property="og:type" content="book">
<meta property="og:url" content="https://raphaelnussbaumer.com/GeoPressureManual/geopressureviz.html">
<meta property="og:image" content="https://raphaelnussbaumer.com/GeoPressureManual/assets/cover.png">
<meta property="og:description" content="GeoPressureR includes the shiny app GeoPressureViz which helps you visualize the overall trajectory of the bird as well as each step-by-step move. Note that this is a visualization tool only and...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 7 GeoPressureViz | A User Manual for GeoPressureR">
<meta name="twitter:description" content="GeoPressureR includes the shiny app GeoPressureViz which helps you visualize the overall trajectory of the bird as well as each step-by-step move. Note that this is a visualization tool only and...">
<meta name="twitter:image" content="https://raphaelnussbaumer.com/GeoPressureManual/assets/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.2/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.1.2.9000/leaflet.js"></script><script src="libs/leaflet-providers-1.13.0/leaflet-providers_1.13.0.js"></script><script src="libs/leaflet-providers-plugin-2.1.2.9000/leaflet-providers-plugin.js"></script><link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/Rafnuss/GeoPressureManual/main/assets/geopressuremanual.ico">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-NJ17NCTPB5"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-NJ17NCTPB5');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">A User Manual for GeoPressureR</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Introduction</a></li>
<li class="book-part">Basic tutorial</li>
<li><a class="" href="tag-object.html"><span class="header-section-number">1</span> Tag object</a></li>
<li><a class="" href="pressure-map.html"><span class="header-section-number">2</span> Pressure map</a></li>
<li><a class="" href="trajectory.html"><span class="header-section-number">3</span> Trajectory</a></li>
<li class="book-part">Advanced tutorial</li>
<li><a class="" href="light-map.html"><span class="header-section-number">4</span> Light map</a></li>
<li><a class="" href="trajectory-with-wind.html"><span class="header-section-number">5</span> Trajectory with wind</a></li>
<li class="book-part">Labelling tools</li>
<li><a class="" href="pressurepath.html"><span class="header-section-number">6</span> Pressurepath</a></li>
<li><a class="active" href="geopressureviz.html"><span class="header-section-number">7</span> GeoPressureViz</a></li>
<li><a class="" href="labelling-tracks.html"><span class="header-section-number">8</span> Labelling tracks</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="resources.html"><span class="header-section-number">A</span> Resources</a></li>
<li><a class="" href="export-and-visual.html"><span class="header-section-number">B</span> Export and Visual</a></li>
<li><a class="" href="probability-aggregation.html"><span class="header-section-number">C</span> Probability aggregation</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/Rafnuss/GeoPressureManual/">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="geopressureviz" class="section level1" number="7">
<h1>
<span class="header-section-number">7</span> GeoPressureViz<a class="anchor" aria-label="anchor" href="#geopressureviz"><i class="fas fa-link"></i></a>
</h1>
<p>GeoPressureR includes the <a href="https://shiny.rstudio.com/" target="_blank">shiny app</a> <code>GeoPressureViz</code> which helps you visualize the overall trajectory of the bird as well as each step-by-step move. Note that <strong>this is a visualization tool only</strong> and as such, it cannot be used to make changes to your data. It offers a useful tool to label your tag and provides a convenient platform to discuss the overall trajectory with collaborators.</p>
<p><a href="https://rafnuss.shinyapps.io/GeoPressureViz/"><img src="assets/geopressureviz-demo.png" width="100%"></a><em>Screenshot of the <a href="https://rafnuss.shinyapps.io/GeoPressureViz/" target="_blank">GeoPressureViz demo</a> showing the estimated position at one stationary period of the Great Reed Warbler (18LX), based on (1) the pressure and light match (map colorscale and timeseries) and (2) potential flight distances from the previous and next stationary periods (circles).</em></p>
<div id="navigate-geopressureviz" class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> Navigate GeoPressureViz<a class="anchor" aria-label="anchor" href="#navigate-geopressureviz"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>Open <a href="https://rafnuss.shinyapps.io/GeoPressureViz/" target="_blank">the demo for 18LX</a></p></li>
<li>
<p>The app has three panels:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Map</strong>: this displays the trajectory of the bird. The size of the circles indicates the duration of the stopover (hover over them to get more info).</p></li>
<li><p><strong>Bottom panel</strong>: this shows the <code>pressurepath</code> of the trajectory which must be computed beforehand. The grey line is the raw data (<code>pressurepath$pressure_tag</code>), the black dots are pressure points labelled as outliers, and colored lines are the normalized pressure at the best match location (i.e., <code>pressurepath$pressure_era5_norm</code>). The color matches the circles on the map.</p></li>
<li><p><strong>Side panel</strong>: this provides key information and tools to navigate the app.</p></li>
</ol>
</li>
<li><p>The “Minimum duration” input allows to filter out short stationary periods on the map, similarly to <code>include_min_duration</code> in <code><a href="https://raphaelnussbaumer.com/GeoPressureR/reference/tag_set_map.html">tag_set_map()</a></code>.</p></li>
<li><p>Toggle the “Full Track” button to move to the stationary period view.</p></li>
<li><p>Navigate from one stationary period to the next using the previous/next button or dropdown list. The pressure timeseries will update to zoom exactly on this stationary period. The color of the timeseries informs you on the current stationary period shown on the map, the two others begin the previous and next one.</p></li>
<li><p>The circles indicates the distance to and from the previous and next stationary period location based on the speed slider on the side panel (default is 40km/h).</p></li>
<li><p>Depending on which maps are available, you can choose to display the probability map of pressure <code>tag$map_pressure</code>, light <code>tag$map_light</code>, their product, or the marginal.</p></li>
<li><p>Because some locations of the most likely path can be completely off, it might be helpful to temporarily change their location to check the coherence of distance with the next/previous stationary period. Click on “Start Editing” to do so Every time you click on the map, it will update the position. Once you’re happy with the position, you can click on the button again to disable the editing mode.</p></li>
<li><p>Finally, you can also check the pressure timeseries with the new positions using the button “Query pressure”. This runs <code><a href="https://raphaelnussbaumer.com/GeoPressureR/reference/geopressure_timeseries.html">geopressure_timeseries()</a></code> in the background, so it will be slow (especially for long stationary periods).</p></li>
</ol>
</div>
<div id="run-geopressureviz" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> Run GeoPressureViz<a class="anchor" aria-label="anchor" href="#run-geopressureviz"><i class="fas fa-link"></i></a>
</h2>
<p>The visualization can be started with your track using <code><a href="https://raphaelnussbaumer.com/GeoPressureR/reference/geopressureviz.html">geopressureviz()</a></code>.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"./data/interim/18LX.RData"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://raphaelnussbaumer.com/GeoPressureR/reference/geopressureviz.html">geopressureviz</a></span><span class="op">(</span></span>
<span>  tag <span class="op">=</span> <span class="va">tag</span>, <span class="co"># required</span></span>
<span>  pressurepath <span class="op">=</span> <span class="va">pressurepath</span>, <span class="co"># optional</span></span>
<span>  marginal <span class="op">=</span> <span class="va">marginal</span>, <span class="co"># optional</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>If your data is stored in <code>"./data/interim/18LX.RData"</code>, you can use directly</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://raphaelnussbaumer.com/GeoPressureR/reference/geopressureviz.html">geopressureviz</a></span><span class="op">(</span><span class="st">"18LX"</span><span class="op">)</span></span></code></pre></div>
<p>Note that the path of the shiny app can be retrieved from the global environment using <code>geopressure_path</code>.</p>

</div>
</div>
<script>
document.getElementsByClassName("book-toc")[0].insertAdjacentHTML("afterend",
                "<div class='text-center'><a href='https://github.com/Rafnuss/GeoPressureTemplate' target='_blank' class='btn btn-sm btn-outline-primary' role='button'>Start your own study</a></div>");
</script><div class="chapter-nav">
<div class="prev"><a href="pressurepath.html"><span class="header-section-number">6</span> Pressurepath</a></div>
<div class="next"><a href="labelling-tracks.html"><span class="header-section-number">8</span> Labelling tracks</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#geopressureviz"><span class="header-section-number">7</span> GeoPressureViz</a></li>
<li><a class="nav-link" href="#navigate-geopressureviz"><span class="header-section-number">7.1</span> Navigate GeoPressureViz</a></li>
<li><a class="nav-link" href="#run-geopressureviz"><span class="header-section-number">7.2</span> Run GeoPressureViz</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/Rafnuss/GeoPressureManual//blob/main/22-geopressureviz.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/Rafnuss/GeoPressureManual//edit/main/22-geopressureviz.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>A User Manual for GeoPressureR</strong>" was written by Raphaël Nussbaumer. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
