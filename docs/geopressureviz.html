<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>B GeoPressureViz | A User Manual for GeoPressureR</title>
<meta name="author" content="Raphaël Nussbaumer">
<meta name="description" content="GeoPressureR includes a Shiny app called GeoPressureViz which helps you visualize the overall trajectory of the bird as well as each step-by-step move. Note that this is a visualization tool only...">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="B GeoPressureViz | A User Manual for GeoPressureR">
<meta property="og:type" content="book">
<meta property="og:url" content="https://raphaelnussbaumer.com/GeoPressureManual/geopressureviz.html">
<meta property="og:image" content="https://raphaelnussbaumer.com/GeoPressureManual/assets/cover.png">
<meta property="og:description" content="GeoPressureR includes a Shiny app called GeoPressureViz which helps you visualize the overall trajectory of the bird as well as each step-by-step move. Note that this is a visualization tool only...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="B GeoPressureViz | A User Manual for GeoPressureR">
<meta name="twitter:description" content="GeoPressureR includes a Shiny app called GeoPressureViz which helps you visualize the overall trajectory of the bird as well as each step-by-step move. Note that this is a visualization tool only...">
<meta name="twitter:image" content="https://raphaelnussbaumer.com/GeoPressureManual/assets/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script><link href="libs/lfx-fullscreen-1.0.2/lfx-fullscreen-prod.css" rel="stylesheet">
<script src="libs/lfx-fullscreen-1.0.2/lfx-fullscreen-prod.js"></script><link href="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css" rel="stylesheet">
<script src="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js"></script><link href="libs/fontawesome-4.7.0/font-awesome.min.css" rel="stylesheet">
<link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/Rafnuss/GeoPressureManual/main/assets/geopressuremanual.ico">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-NJ17NCTPB5"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-NJ17NCTPB5');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">A User Manual for GeoPressureR</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Introduction</a></li>
<li><a class="" href="pressure-map.html"><span class="header-section-number">1</span> Pressure map</a></li>
<li><a class="" href="light-map.html"><span class="header-section-number">2</span> Light map</a></li>
<li><a class="" href="static-map.html"><span class="header-section-number">3</span> Static map</a></li>
<li><a class="" href="basic-graph.html"><span class="header-section-number">4</span> Basic graph</a></li>
<li><a class="" href="wind-graph.html"><span class="header-section-number">5</span> Wind graph</a></li>
<li><a class="" href="export-and-visual.html"><span class="header-section-number">6</span> Export and Visual</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="labelling-tracks.html"><span class="header-section-number">A</span> Labelling tracks</a></li>
<li><a class="active" href="geopressureviz.html"><span class="header-section-number">B</span> GeoPressureViz</a></li>
<li><a class="" href="probability-aggregation.html"><span class="header-section-number">C</span> Probability aggregation</a></li>
<li><a class="" href="gridded-gibbs-sampler.html"><span class="header-section-number">D</span> Gridded Gibbs sampler</a></li>
<li><a class="" href="resources.html"><span class="header-section-number">E</span> Resources</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/Rafnuss/GeoPressureManual/">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="geopressureviz" class="section level1" number="8">
<h1>
<span class="header-section-number">B</span> GeoPressureViz<a class="anchor" aria-label="anchor" href="#geopressureviz"><i class="fas fa-link"></i></a>
</h1>
<p>GeoPressureR includes a <a href="https://shiny.rstudio.com/">Shiny app</a> called <code>GeoPressureViz</code> which helps you visualize the overall trajectory of the bird as well as each step-by-step move. Note that <strong>this is a visualization tool only</strong> and as such, does not change/modify anything on your data. The main goal is to check any issue with the labeling of pressure and the secondary goal is to give you a more intuitive sense of how your bird is moving. This can be a useful platform to discuss the bird trajectory with your collaborators.</p>
<p><a href="https://rafnuss.shinyapps.io/GeoPressureViz/"><img src="assets/geopressureviz-demo.png" width="100%"></a><em>Screenshot of the <a href="https://rafnuss.shinyapps.io/GeoPressureViz/">GeoPressureViz demo</a> showing the estimated position at one stationary period of the Great Reed Warbler 18LX, based on (1) the pressure and light match (map colorscale and timeserie) and (2) potential flight distances from previous and next stationary period (circles).</em></p>
<div id="navigate-geopressureviz" class="section level2" number="8.1">
<h2>
<span class="header-section-number">B.1</span> Navigate GeoPressureViz<a class="anchor" aria-label="anchor" href="#navigate-geopressureviz"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>Open <a href="https://rafnuss.shinyapps.io/GeoPressureViz/">the demo for 18LX</a></p></li>
<li>
<p>The viewer has three panels:</p>
<ol style="list-style-type: decimal">
<li><p>The maps showing your the trajectory of the bird. The size of the circles indicates the duration of the stopover (hover over them to get more info).</p></li>
<li><p>The bottom panel showing the pressure timeserie. The grey line is the raw day (<code>pam$pressure</code>), the black dots are pressure labeled as outlier, colored lines are the normalized pressure at the best match (i.e., <code>static_timeserie$pressure0</code>) and the color match the map dots.</p></li>
<li><p>The side panel provides key information and helps you navigates the app</p></li>
</ol>
</li>
<li><p>A central parameter to play with carefully is the “Minimum duration”. This will filter the entire dataset and replot the map and figure to select only stopover of such duration or higher. Try changing this value once and wait a bit for the figure to update. As shorter stationary period are less certain, their position is often wrong. That’s ok for now.</p></li>
<li><p>Toggle the “Full Track” button to move to the stationary period view. The side panel will change and provides you with more options.</p></li>
<li><p>Change the stationary period with the drop down or previous/next button. Except from the first sta., three dots, two lines and two circle will appears on the map, and the pressure timeserie will update to zoom exactly on this stationary period. The color of the timeserie informs you on which dots on the map is the current stationary period, the two others begin the previous and next one.</p></li>
<li><p>The circles indicates the distance from and to the previous and last stationary period location based on the speed slider on the side panel (default if 40km/h). You can edit the speed to see how this impact the distances.</p></li>
<li><p>You can choose to display the probability map of pressure (<code>pressure_prob</code>) , light (<code>light_prob</code>) or combined (<code>static_prob</code>).</p></li>
<li><p>Because some location of the most likely path can be completely off (hence the need for a trajectory model), it might be helpful to change temporarily their location to check the coherence of distance with the next/previous stationary period. Use the button “Start Editing” to do that. Every time you will click on the map, it will update the position. Once you’re happy with the position, you can click again the button to disable the editing mode.</p></li>
<li><p>Finally, you can also check the pressure timeserie with the new position that you’ve edited with the button “Query pressure”. This runs <code><a href="https://raphaelnussbaumer.com/GeoPressureR/reference/geopressure_ts.html">geopressure_ts()</a></code> on the background, so it will be slow (especially for long stationary period). This feature is quite unstable, so use carefully, and be aware that you might have to restart the app if it crashes (submit <a href="https://github.com/Rafnuss/GeoPressureR/issues/new">an issue</a> with reproducible example).</p></li>
</ol>
</div>
<div id="run-geopressureviz-1" class="section level2" number="8.2">
<h2>
<span class="header-section-number">B.2</span> Run GeoPressureViz<a class="anchor" aria-label="anchor" href="#run-geopressureviz-1"><i class="fas fa-link"></i></a>
</h2>
<p>To run the visualization, use the <code><a href="https://raphaelnussbaumer.com/GeoPressureR/reference/geopressureviz.html">geopressureviz()</a></code> function. The minimum information needed is <code>pam</code> and <code>static_prob</code>, but to see the difference between light and pressure, you can also add <code>light_prob</code> and <code>pressure_prob</code>. To see the match of pressure timeserie in the bottom panel, add <code>pressure_timeserie</code>. The visualization will only display the stationary period present in <code>static_prob</code>.</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_modified</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://raphaelnussbaumer.com/GeoPressureR/reference/geopressureviz.html">geopressureviz</a></span><span class="op">(</span></span>
<span>  pam <span class="op">=</span> <span class="va">pam</span>, <span class="co"># required</span></span>
<span>  pressure_prob <span class="op">=</span> <span class="va">pressure_prob</span>, <span class="co"># optional</span></span>
<span>  light_prob <span class="op">=</span> <span class="va">light_prob</span>, <span class="co"># optional</span></span>
<span>  static_prob <span class="op">=</span> <span class="va">static_prob</span>, <span class="co"># required. You can use pressure_prob here.</span></span>
<span>  static_prob_marginal <span class="op">=</span> <span class="va">grl_marginal</span>, <span class="co"># optional</span></span>
<span>  pressure_timeserie <span class="op">=</span> <span class="va">static_timeserie</span> <span class="co"># optional. Could be either: pressure_timeserie, static_timeserie, shortest_path_timeserie</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Note that if you close the app from the browser, it should return the path that you have interactively created as a data.frame.</p>

</div>
</div>
<script>
document.getElementsByClassName("book-toc")[0].insertAdjacentHTML("afterend",
                "<div class='text-center'><a href='https://github.com/Rafnuss/GeoPressureTemplate' target='_blank' class='btn btn-sm btn-outline-primary' role='button'>Start your own study</a></div>");
</script><div class="chapter-nav">
<div class="prev"><a href="labelling-tracks.html"><span class="header-section-number">A</span> Labelling tracks</a></div>
<div class="next"><a href="probability-aggregation.html"><span class="header-section-number">C</span> Probability aggregation</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#geopressureviz"><span class="header-section-number">B</span> GeoPressureViz</a></li>
<li><a class="nav-link" href="#navigate-geopressureviz"><span class="header-section-number">B.1</span> Navigate GeoPressureViz</a></li>
<li><a class="nav-link" href="#run-geopressureviz-1"><span class="header-section-number">B.2</span> Run GeoPressureViz</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/Rafnuss/GeoPressureManual//blob/main/B-geopressureviz.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/Rafnuss/GeoPressureManual//edit/main/B-geopressureviz.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>A User Manual for GeoPressureR</strong>" was written by Raphaël Nussbaumer. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
